{% load i18n %}
{
    "iaccess.AccRTMonitor":{
		"params":"",
        "verbose_fields":{
        	"4":"event_type",
            "10":"verified"
        },
        "head":["{% trans '时间' %}","{% trans '区域' %}","{% trans '设备' %}","{% trans '事件点' %}","{% trans '事件描述' %}","{% trans '卡号' %}","{% trans '人员编号' %}","{% trans '姓 名' %}","{% trans '部门' %}","{% trans '状态' %}","{% trans '验证方式' %}","{% trans '备注' %}"],
        "db_fields":["time","area","device_name","event_point_name","event_type","card_no","pin","full_name","dept","state_name","verified","description"],
        "sql":"
            SELECT time,area,device_name,event_point_name,event_type,card_no,pin,concat(firstname,ifnull(lastname,' ')) as full_name,dept,state_name,verified,description 
            FROM (
                select a.time,a.area,a.device_name,a.event_point_name,a.event_type,a.card_no,a.pin,a.firstname,a.lastname,a.dept,a.state_name,a.verified,a.description 
                from acc_monitor_log a left join userinfo u on a.pin = u.badgenumber order by time desc
            )
            as records %s limit %s,%s
        "
    },
	"personnel.Employee":{
            "params":"", 
            "use_perms":"True",  
            "verbose_fields":{
                "3":"Gender",
                "12":"Privilege",
				"17":"hiretype",
				"18":"emptype"
            },
            "head":["{% trans '人员编号' %}","{% trans '姓名' %}","{% trans '姓氏' %}","{% trans '性别' %}","{% trans '卡号' %}","{% trans '物理卡号' %}","{% trans '区位码' %}","{% trans '密码' %}","{% trans '部门编号' %}","{% trans '部门名称' %}","{% trans '延迟开门' %}","{% trans '延长时间' %}","{% trans '设备角色' %}","{% trans '预约密码' %}","{% trans '城市' %}","{% trans '身份证号码' %}","{% trans '办公电话' %}","{% trans '雇佣类型' %}","{% trans '员工类型' %}","{% trans '家庭电话' %}","{% trans '手机' %}","{% trans '生日' %}","{% trans '邮箱' %}","{% trans '聘用日期' %}","{% trans '家庭地址' %}","{% trans '办公地址' %}","{% trans '开始时间' %}","{% trans '结束时间' %}"],
            "db_fields":["badgenumber","name","lastname","gender","card_no","card_number","site_code","Password","code","DeptName","delayed_door_open","extend_time","Privilege","selfpassword","City","identitycard","ophone","hiretype","emptype","FPHONE","pager","Birthday","email","Hiredday","homeaddress","street","acc_startdate","acc_enddate"],
            "sql": "
                SELECT badgenumber,name,lastname,gender,card_no,card_number,site_code,Password,code,DeptName,delayed_door_open,extend_time,Privilege,selfpassword,City,identitycard,ophone,hiretype,emptype,FPHONE,pager,Birthday,email,Hiredday,homeaddress,street,acc_startdate,acc_enddate 
                            from (
                        SELECT badgenumber,name,lastname,gender,card_no,card_number,site_code,Password,code,DeptName,delayed_door_open,extend_time,Privilege,selfpassword,City,identitycard,ophone,hiretype,emptype,FPHONE,pager,Birthday,email,Hiredday,homeaddress,street,acc_startdate,acc_enddate 
                                FROM(
                                    SELECT   
                                            u.userid,u.defaultdeptid,u.badgenumber,u.name, u.lastname,u.gender,d.code,d.DeptName,pager,u.delayed_door_open,u.extend_time,u.card_number,u.site_code,
                                            u.Birthday,u.Password,u.City,u.identitycard,u.email,u.Hiredday,u.hiretype,u.emptype,u.homeaddress,u.street,u.acc_startdate,u.acc_enddate,u.FPHONE,u.ophone,u.Privilege,u.selfpassword,
                                   (select cardno from personnel_issuecard i where cardstatus = '1' and i.userid_id = u.userid) as card_no
                                    from userinfo u left join departments d on u.defaultdeptid=d.deptid 
                                    where u.defaultdeptid= d.DeptId and d.code != '123456' and 
                                    not(u.status=3) and not(u.status=999) order
                                    by u.badgenumber
                                ) AS RECORDS %s 
                                )as b limit %s,%s
                    ",
                    "admin_sql": "
                        SELECT badgenumber,name,lastname,gender,card_no,card_number,site_code,Password,code,DeptName,delayed_door_open,pager,extend_time,Privilege,selfpassword,City,identitycard,ophone,hiretype,emptype,FPHONE,pager,Birthday,email,Hiredday,homeaddress,street,acc_startdate,acc_enddate 
                            from (
                        SELECT badgenumber,name,lastname,gender,card_no,card_number,site_code,Password,code,DeptName,delayed_door_open,pager,extend_time,Privilege,selfpassword,City,identitycard,ophone,hiretype,emptype,FPHONE,pager,Birthday,email,Hiredday,homeaddress,street,acc_startdate,acc_enddate 
                                FROM(
                                    SELECT   
                                            u.defaultdeptid,u.badgenumber,u.name, u.lastname,u.gender,d.code,d.DeptName,pager,u.delayed_door_open,u.extend_time,u.card_number,u.site_code,
                                            u.Birthday,u.Password,u.City,u.identitycard,u.email,u.Hiredday,u.hiretype,u.emptype,u.homeaddress,u.street,u.acc_startdate,u.acc_enddate,u.FPHONE,u.ophone,u.Privilege,u.selfpassword,
                                   (select cardno from personnel_issuecard i where cardstatus = '1' and i.userid_id = u.userid) as card_no
                                    from userinfo u left join departments d on u.defaultdeptid=d.deptid 
                                    where u.defaultdeptid= d.DeptId and d.code != '123456' and 
                                    not(u.status=3) and not(u.status=999) order
                                    by u.badgenumber
                                ) AS RECORDS %s 
                                )as b limit %s,%s
                            "               
    }
}
