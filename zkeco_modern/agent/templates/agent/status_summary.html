<!DOCTYPE html>
<html><head><title>Device Status Summary</title><meta charset="utf-8" />
<style>
body{font-family:Arial;background:#f5f9fc;margin:0;color:#222;}
header{background:#1e6bb8;color:#fff;padding:10px 16px;font-size:18px;}
.table-wrap{padding:14px;}
.stats{display:flex;gap:12px;margin-bottom:12px;}
.stat{background:#fff;border:1px solid #d0d7de;padding:10px 14px;border-radius:6px;min-width:130px;box-shadow:0 1px 2px rgba(0,0,0,.08);}
.stat strong{display:block;font-size:20px;margin-bottom:4px;}
.open{color:#d0353b;font-weight:600;}
.online{color:#2da44e;font-weight:600;}
.offline{color:#cf222e;font-weight:600;}
table{border-collapse:collapse;width:100%;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.08);}
th,td{border:1px solid #d0d7de;padding:6px 8px;font-size:13px;text-align:left;}
th{background:#f0f3f6;}
tr:nth-child(even){background:#fafbfc;}
.btn{padding:6px 12px;border:1px solid #1e6bb8;background:#1e6bb8;color:#fff;border-radius:4px;cursor:pointer;font-size:12px;text-decoration:none;}
</style></head>
<body>
<header>Status Summary</header>
<div class="table-wrap">
  <div class="stats">
    <div class="stat"><strong>{{ summary.total }}</strong>Total Devices</div>
    <div class="stat"><strong class="online">{{ summary.online }}</strong>Online</div>
    <div class="stat"><strong class="open">{{ summary.doors_open }}</strong>Doors Open</div>
    <div class="stat"><a class="btn" href="/agent/monitor/">Monitor</a></div>
  </div>
  <table>
    <thead><tr><th>ID</th><th>Name</th><th>Serial</th><th>Online</th><th>Door State</th><th>Updated</th></tr></thead>
    <tbody>
      {% for r in rows %}
      <tr>
        <td>{{ r.id }}</td>
        <td>{{ r.name }}</td>
        <td>{{ r.serial }}</td>
        <td>{% if r.online %}<span class="online">ONLINE{% else %}<span class="offline">OFFLINE{% endif %}</span></td>
        <td>{{ r.door_state }}</td>
        <td>{{ r.updated_at }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="6">No status records yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
</body></html>
